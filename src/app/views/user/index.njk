{% extends 'layout.njk'%}

{% block content %}

    <section class='container form'>
        <form action="/user?_method=PUT" method="post">
            <div class="header">
                <h3>Meus Dados</h3>
            </div>

            <input type="hidden" name="id" value="{{user.id}}">
            <div class="fields">
                {% include 'user/fields.njk' %}
            </div>
            
            <button class="button edit" type="submit">Atualizar</button>
        </form>
        
        <form id="form-delete" action="/user?_method=DELETE" method="POST">
                <input type="hidden" name="id" value="{{user.id}}">
                <button  class="button delete" id="delete-button" type="submit">Deletar</button>
        </form>
    </section>
    <script>
        const formDelete = document.querySelector('#form-delete');
        formDelete.addEventListener("submit", function (event) {
            const confirmation = confirm('Deseja deletar?');
            if (!confirmation) {
                event.preventDefault();
            }
        })
    </script>

{% endblock content %}